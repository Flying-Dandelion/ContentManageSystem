<!DOCTYPE html>
<html>
<%- include ../layouts/head.ejs %>
<body>
<section class="main">
    <%- include ../layouts/menu.ejs %>
    <div class="container">
        <ul class="breadcrumb">
            <li>订单管理</li>
            <li>订单列表</li>
        </ul>
        <div class="content">
            <input id="pageIndex" type="hidden" value="1"/>
            <div class="mar-bottom20">
                <div class="form-group col-sm-4">
                    订单编号：<input type="text" class="form-control input-sm w100" id="txtOrderNum" />
                </div>
                <div class="form-group col-sm-4">
                    订单状态：<select class="form-control input-sm w100" id="txtStatus" name="txtStatus">
                        <option value="">全部</option>
                        <option value="1">待付款</option>
                        <option value="2">待发货</option>
                        <option value="3">待收货</option>
                        <option value="4">交易成功</option>
                    </select>
                </div>
                <div class="form-group col-sm-4">
                    用户手机号：<input class="form-control input-sm w100" id="txtUserPhone" name="txtUserPhone"/>
                </div>
            </div>
            <div class="mar-bottom20">
                <div class="form-group col-sm-8">
                    添加时间：<input type="text" class="form-control input-sm w100" value="2016-01-01"  id="txtAddTimeStart" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:'#F{$dp.$D(\'txtAddTimeEnd\')}',isShowClear:false,readOnly:true})"  />
                    ~<input type="text" class="form-control input-sm w100"  id="txtAddTimeEnd"  onfocus="WdatePicker({dateFmt:'yyyy-MM-dd',minDate:'#F{$dp.$D(\'txtAddTimeStart\')}',isShowClear:false,readOnly:true})" />
                </div>
                <input type="button" class="btn btn-sm btn-danger" value="查询" id="btnQuery" />
                <input type="button" class="btn btn-sm btn-default" value="清除条件" id="btnClear" />
                <a href="/productMsg/addProduct" class="btn btn-sm btn-danger">添加商品</a>
            </div>
            <table class="table table-striped text-center" >
                <thead>
                <tr>
                    <th class="text-center">订单编号</th>
                    <th class="text-center">用户电话</th>
                    <th class="text-center">订单状态</th>
                    <th class="text-center">总金额</th>
                    <th class="text-center">添加时间</th>
                    <th class="text-center">操作</th>
                </tr>
                </thead>
                <tbody id="userList">
                <template  v-for="item in items">
                    <tr>
                        <td>{{ item.orderNum }}</td>
                        <td>{{ item.userPhone }}</td>
                        <td>{{ item.status=="1"?"待付款":(item.status=="2"?"待发货":(item.status=="3"?"待收货":(item.status=="4"?"交易成功":"交易失败"))) }}</td>
                        <td>{{ item.summary }}</td>
                        <td>{{ item.addtime }}</td>
                        <td>
                           <a v-bind:href="'/orderMsg/orderDetail?key='+item.orderNum ">查看详情</a>
                           <input type="button" onclick="setOrderStatus('{{item.orderNum}}','{{item.status}}')" class="btn btn-sm btn-danger" v-if="item.status==2" value="发货" />
                        </td>
                    </tr>
                </template >
                </tbody>
            </table>
            <div class="page-bar mar-top20">
                <ul class="clearfix">
                    <li v-if="showFirst"><a v-on:click="cur--">上一页</a></li>
                    <li v-for="index in indexs"  v-bind:class="{ 'active': cur == index}">
                        <a v-on:click="btnClick(index);">{{ index }}</a>
                    </li>
                    <li v-if="showLast"><a v-on:click="cur++">下一页</a></li>
                    <li><a>共<i>{{all}}</i>页</a></li>
                </ul>
            </div>
        </div>
    </div>
</section>
<%- include ../layouts/footer.ejs %>
<script src="/msgView/javascripts/common/vue.js"></script>
<script src="/msgView/javascripts/common/page.js"></script>
<script type="text/javascript">
    seajs.use("/msgView/javascripts/orderMsg/orderList", function(orderList){
        orderList.init();
    });
</script>
</body>
</html>
